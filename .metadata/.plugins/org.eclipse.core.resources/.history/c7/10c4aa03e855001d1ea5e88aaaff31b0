package com.cachatto.cemm.controller;

import java.util.HashMap;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.domain.Page;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;

import com.cachatto.cemm.model.Device;
import com.cachatto.cemm.model.User;
import com.cachatto.cemm.service.DeviceService;
import com.cachatto.cemm.service.DeviceTypeService;

@Controller
@RequestMapping("/admin/deviceType")
public class DeviceTypeController {
	@Autowired
    DeviceTypeService deviceTypeService;
	 DeviceService deviceService;
	 DeviceRepository deviceRepository;
	@GetMapping("/deviceCount")
	public String showDevices(Model model){

	HashMap counts = deviceTypeService.deviceCount();
	
	Long android = (Long)counts.get("android");
	Long ios = (Long)counts.get("ios");
	

	model.addAttribute("android", android);
	model.addAttribute("ios", ios);


return "deviceType";
}
//@RequestMapping("/admin/deviceType")
	//public class DeviceDetailsController {
	

	    
	   

	    @GetMapping("/deviceInfo/{deviceType}")
	    public String getDeviceDetails(@PathVariable Long id, Model model){
	    	User userDetails = deviceRepository.findById(deviceId).get();
	        model.addAttribute("deviceInfo", deviceService.getDeviceDetails(id));
	        return "deviceInfo";
	    }
	
}
